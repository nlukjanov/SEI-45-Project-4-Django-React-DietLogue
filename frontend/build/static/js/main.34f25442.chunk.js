(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{43:function(e,t,a){e.exports=a.p+"static/media/logo-notext.60153417.png"},48:function(e,t,a){e.exports=a(87)},53:function(e,t,a){},59:function(e,t,a){},61:function(e,t,a){e.exports=a.p+"static/media/logo3.00a88fea.png"},87:function(e,t,a){"use strict";a.r(t);for(var n=a(0),r=a.n(n),l=a(23),s=a.n(l),c=(a(53),a(13)),o=a(20),i=a(18),m=a.n(i),u=(a(59),a(60),a(4)),d=a(5),h=a(6),p=a(7),f=a(8),E=function(e){function t(){return Object(u.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"section"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"columns is-mobile is-centered"},r.a.createElement("div",{className:"column is-mobile"},r.a.createElement("div",{className:"column is-mobile"},r.a.createElement("figure",null,r.a.createElement("img",{className:"column is-mobile has-image-centered",src:a(61)}))),r.a.createElement("div",{className:"is-size-4 has-text-centered"},"LET'S START THE DIETLOGUE ABOUT NUTRITION!"))),r.a.createElement(c.b,{className:"button is-primary is-fullwidth",to:"/register"},"Register"),r.a.createElement("br",null),r.a.createElement(c.b,{className:"button is-primary is-fullwidth",to:"/login"},"Login"))))}}]),t}(r.a.Component),b=a(9),v=a.n(b),g=a(14),N=a(2),y=a(10),D=a(11),O=a.n(D),k=a(46),w={common:{"X-CSRF-TOKEN":a.n(k).a.get("csrftoken")}},j=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).handleChange=function(e){var t=e.target.value;a.props.onSelectChange(t)},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.data.map((function(e){return r.a.createElement("option",{key:e,value:e},e)}));return r.a.createElement("select",{onChange:this.handleChange},r.a.createElement("option",null),e)}}]),t}(r.a.Component),C=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={data:{username:"",email:"",password:"",password_confirmation:"",gender:"",height:0,weight:0,dob:new Date},errors:{}},a.numberIncrease=function(e,t,a){return Array.from({length:(t-e)/a+1},(function(t,n){return e+n*a}))},a.heights=a.numberIncrease(100,200,1),a.weights=a.numberIncrease(30,150,1),a.handleChange=function(e){var t=e.target.name,n=e.target.value,r=Object(y.a)({},a.state.data,Object(N.a)({},t,n));a.setState({data:r})},a.handleHeightSelectChange=function(e){a.setState(Object(y.a)({},a.state,{data:Object(y.a)({},a.state.data,{height:Number(e)})}))},a.handleWeightSelectChange=function(e){a.setState(Object(y.a)({},a.state,{data:Object(y.a)({},a.state.data,{weight:Number(e)})}))},a.handleSubmit=function(){var e=Object(g.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,O.a.post("/api/register/",a.state.data,w);case 4:i.notify.show("Account successfully created","success",2e3),a.props.history.push("/login/"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),a.setState({errors:e.t0.response.data});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"section"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"columns"},r.a.createElement("form",{className:"column is-half is-offset-one-quarter",onSubmit:this.handleSubmit},r.a.createElement("h2",{className:"title is-5 is-mobile has-text-centered"},"Create your account"),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",onChange:this.handleChange,placeholder:"username",name:"username",required:!0}))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",onChange:this.handleChange,type:"email",placeholder:"email",name:"email",required:!0}))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",onChange:this.handleChange,type:"password",placeholder:"password",name:"password",required:!0}))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",onChange:this.handleChange,type:"password",placeholder:"confirm password",name:"password_confirmation",required:!0}))),r.a.createElement("hr",null),r.a.createElement("div",null,r.a.createElement("h2",{className:"title is-5 is-mobile has-text-centered"},"Tell us a little bit about yourself")),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("label",{className:"label"},"Gender"),r.a.createElement("label",{className:"radio"},r.a.createElement("input",{type:"radio",name:"gender",value:"M",onChange:this.handleChange}),"Male"),r.a.createElement("label",{className:"radio"},r.a.createElement("input",{type:"radio",name:"gender",value:"F",onChange:this.handleChange}),"Female")),this.state.errors.gender&&r.a.createElement("small",{className:"help is-danger"},"Please select a gender")),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Height"),r.a.createElement("div",{className:"control"},r.a.createElement(j,{data:this.heights,onSelectChange:this.handleHeightSelectChange})),this.state.errors.height&&r.a.createElement("small",{className:"help is-danger"},this.state.errors.height[0].replace("null","empty"))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Weight"),r.a.createElement("div",{className:"control"},r.a.createElement(j,{data:this.weights,onSelectChange:this.handleWeightSelectChange})),this.state.errors.weight&&r.a.createElement("small",{className:"help is-danger"},this.state.errors.weight[0].replace("null","empty"))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Date of Birth"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{type:"date",className:"input",name:"dob",onChange:this.handleChange})),this.state.errors.height&&r.a.createElement("small",{className:"help is-danger"},this.state.errors.dob[0])),r.a.createElement("div",null,r.a.createElement("button",{className:"button is-primary is-fullwidth",type:"submit"},"Register")))))))}}]),t}(r.a.Component),S=function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,null,[{key:"setToken",value:function(e){localStorage.setItem("token",e)}},{key:"getToken",value:function(){return localStorage.getItem("token")}},{key:"logout",value:function(){localStorage.removeItem("token")}},{key:"getPayload",value:function(){var e=this.getToken();if(!e)return!1;var t=e.split(".");return!(t.length<3)&&JSON.parse(atob(t[1]))}},{key:"isAuthenticated",value:function(){var e=this.getPayload();return!!e&&Math.round(Date.now()/1e3)<e.exp}}]),e}(),x=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={data:{email:"",password:""},error:""},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value,l=Object(y.a)({},a.state.data,Object(N.a)({},n,r));a.setState({data:l,error:""})},a.handleSubmit=function(){var e=Object(g.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,O.a.post("/api/login/",a.state.data,w);case 4:n=e.sent,S.setToken(n.data.token),i.notify.show("Welcome Back!","success",3e3),a.props.history.push("/"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),a.setState({error:e.t0.response.data.message});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement("section",{className:"section"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"columns"},r.a.createElement("div",{className:"column column is-half is-offset-one-quarter"},r.a.createElement("h1",{className:"title is-5 is-mobile has-text-centered"},"Login Here"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",placeholder:"email",name:"email",onChange:this.handleChange}))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"password",placeholder:"password",name:"password",onChange:this.handleChange})),this.state.error&&r.a.createElement("small",{className:"help is-danger"},this.state.error)),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("button",{className:"button is-primary is-fullwidth",type:"submit"},"Login"))))))))}}]),t}(r.a.Component),M=a(47),A=a.n(M),L=a(28),Y={fat:56,sat_fat:16,carbs:208,protein:34,fiber:22.4,calories:1600},F={fat:63,sat_fat:18,carbs:236,protein:46,fiber:25.2,calories:1800},P={fat:70,sat_fat:20,carbs:260,protein:50,fiber:28,calories:2e3},T={fat:77,sat_fat:22,carbs:286,protein:52,fiber:30.8,calories:2200},H={fat:84,sat_fat:24,carbs:312,protein:56,fiber:33.6,calories:2400},_=[],W=new Date,I=1;I<=7;I++){var B=W.getDate()-W.getDay()+I,z=new Date(W.setDate(B)).toISOString().slice(0,10);_.push(z)}var U=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={userData:{},todayLogEntries:[],dailyLogEntries:[],dropDownSelection:"calories",diet:""},a.setUserData=function(){var e=a.state.userData.logs.filter((function(e){return L(new Date).format("YYYY-MM-DD")===L(e.date).format("YYYY-MM-DD")}));a.setState({todayLogEntries:e,diet:function(){var e=L().diff(a.state.userData.dob,"years");return"M"===a.state.userData.gender?e>=9&&e<=13?Y:e>=14&&e<=18?T:e>=19&&e<=30?H:e>=31&&e<=50?T:P:"F"===a.state.userData.gender?e>=9&&e<=13?Y:e>=14&&e<=18?F:e>=19&&e<=30?P:e>=31&&e<=50?F:e>=51?Y:P:void 0}()})},a.setDailyLogEntries=function(){var e=a.state.userData.logs.reduce((function(e,t){var a=t.date;return e[a]||(e[a]=[]),e[a].push(t),e}),{});a.setState({dailyLogEntries:e})},a.calculateProgress=function(e){return a.state.todayLogEntries.map((function(t){return t.food[e]*t.portion})).reduce((function(e,t){return Number(e)+Number(t)}),0)},a.unpackNutrients=function(e){return Object.entries(a.state.dailyLogEntries).filter((function(t){return t.flat(2)[0]===e})).flat(2)},a.calculateDailyTotal=function(e,t){return a.unpackNutrients(e).filter((function(e){return"string"!==typeof e})).map((function(e){return Number(e.food[t])*Number(e.portion)})).reduce((function(e,t){return parseFloat(e)+parseFloat(t)}),0)},a.getCurrentWeekValues=function(e){return _.map((function(t){return a.calculateDailyTotal(t,e)}))},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value,l=t.checked,s="checkbox"===t.type?l:r;a.setState(Object(N.a)({},n,s))},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(g.a)(v.a.mark((function e(){var t,a=this;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.get("/api/myaccount/",{headers:{Authorization:"Bearer ".concat(S.getToken("token"))}});case 3:t=e.sent,console.log("res",t.data),this.setState({userData:t.data},(function(){a.setUserData(),a.setDailyLogEntries()})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return console.log(this.state),r.a.createElement("section",{className:"section"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"columns is-mobile is-centered"},r.a.createElement("div",{className:"column is-6"},r.a.createElement("figure",{className:"column is-mobile"},r.a.createElement("img",{className:"column is-3 is-mobile has-image-centered is-16x16",src:a(43)})))),r.a.createElement("div",{className:"columns"},r.a.createElement("div",{className:"column is-12"},r.a.createElement("div",{className:"mobile"},r.a.createElement(A.a,{useResizeHandler:!0,style:{height:"100%",width:"100%"},data:[{x:_.slice(0,5),y:this.getCurrentWeekValues("protein"),type:"scatter",mode:"lines+markers",marker:{color:"red"},name:"protein"},{x:_.slice(0,5),y:this.getCurrentWeekValues("calories"),type:"scatter",mode:"lines+markers",marker:{color:"yellow"},name:"calories",yaxis:"y2"},{x:_.slice(0,5),y:this.getCurrentWeekValues("carbs"),type:"scatter",mode:"lines+markers",marker:{color:"green"},name:"carbs"},{x:_.slice(0,5),y:this.getCurrentWeekValues("fat"),type:"scatter",mode:"lines+markers",marker:{color:"red"},name:"fat"},{x:_.slice(0,5),y:this.getCurrentWeekValues("sat_fat"),type:"scatter",mode:"lines+markers",marker:{color:"blue"},name:"sat_fat"}],layout:{title:"You weekly consumption",margin:{t:60,r:50,l:30,b:60},autosize:!0,showlegend:!0,xaxis:{autorange:!0},yaxis2:{overlaying:"y",side:"right",title:"calories measure"},legend:{x:.5,y:1}},config:{displayModeBar:!1}})),r.a.createElement("hr",null),r.a.createElement("div",null,r.a.createElement("h4",{className:"is-size-5 has-text-centered"},"Your day at a glance")),r.a.createElement("br",null),r.a.createElement("div",{className:"field is-centered"},r.a.createElement("div",{className:"select"},r.a.createElement("select",{name:"dropDownSelection",onChange:this.handleChange,value:this.state.dropDownSelection,className:"is-centered"},r.a.createElement("option",{value:"calories"},"Calories"),r.a.createElement("option",{value:"protein"},"Protein"),r.a.createElement("option",{value:"carbs"},"Carbs"),r.a.createElement("option",{value:"fiber"},"Fiber"),r.a.createElement("option",{value:"fat"},"Fat"),r.a.createElement("option",{value:"sat_fat"},"Sat Fat")))),r.a.createElement("progress",{className:"progress is-primary",value:this.calculateProgress(this.state.dropDownSelection),max:this.state.diet[this.state.dropDownSelection]}),r.a.createElement("div",{className:"table-container"},r.a.createElement("table",{className:"table is-fullwidth"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Food"),r.a.createElement("th",null,"Portion"),r.a.createElement("th",null,"Measure"),r.a.createElement("th",null,"Unit"),r.a.createElement("th",null,"Grams"),r.a.createElement("th",null,"Calories"),r.a.createElement("th",null,"Protein"),r.a.createElement("th",null,"Carbs"),r.a.createElement("th",null,"Fiber"),r.a.createElement("th",null,"Fat"),r.a.createElement("th",null,"Sat. Fat"))),r.a.createElement("tbody",null,this.state.todayLogEntries.map((function(t){return r.a.createElement("tr",{className:"link",key:t.id,onClick:function(){return e.props.history.push("/logs/".concat(t.id,"/edit"))}},r.a.createElement("td",null,t.food.name),r.a.createElement("td",null,t.portion),r.a.createElement("td",null,t.food.measure),r.a.createElement("td",null,t.food.unit),r.a.createElement("td",null,Math.round(t.food.grams*t.portion)),r.a.createElement("td",null,Math.round(t.food.calories*t.portion)),r.a.createElement("td",null,Math.round(t.food.protein*t.portion)),r.a.createElement("td",null,Math.round(t.food.carbs*t.portion)),r.a.createElement("td",null,Math.round(t.food.fiber*t.portion)),r.a.createElement("td",null,Math.round(t.food.fat*t.portion)),r.a.createElement("td",null,Math.round(t.food.sat_fat*t.portion)))})))))))))}}]),t}(r.a.Component),q=a(28),R=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={logData:[]},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(g.a)(v.a.mark((function e(){var t,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.get("/api/myaccount/",{headers:{Authorization:"Bearer ".concat(S.getToken("token"))}});case 3:t=e.sent,a=t.data.logs.sort((function(e,t){return new Date(t.date)-new Date(e.date)})),this.setState({logData:a}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),this.props.history.push("/notfound");case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.logData;return r.a.createElement("section",{className:"section"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"title has-text-centered"},"Your log history"),r.a.createElement("div",{className:"table-container"},r.a.createElement("table",{className:"table is-fullwidth"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Date"),r.a.createElement("th",null,"Food"),r.a.createElement("th",null,"Portion"),r.a.createElement("th",null,"Measure"),r.a.createElement("th",null,"Unit"),r.a.createElement("th",null,"Grams"),r.a.createElement("th",null,"Calories"),r.a.createElement("th",null,"Protein"),r.a.createElement("th",null,"Carbs"),r.a.createElement("th",null,"Fiber"),r.a.createElement("th",null,"Fat"),r.a.createElement("th",null,"Sat. Fat"))),r.a.createElement("tbody",null,t.map((function(t){return r.a.createElement("tr",{className:"link",key:t.id,onClick:function(){return e.props.history.push("/logs/".concat(t.id,"/edit"))}},r.a.createElement("td",null,q(t.date).format("DD/MM/YYYY")),r.a.createElement("td",null,t.food.name),r.a.createElement("td",null,t.portion),r.a.createElement("td",null,t.food.measure),r.a.createElement("td",null,t.food.unit),r.a.createElement("td",null,Math.round(t.food.grams*t.portion)),r.a.createElement("td",null,Math.round(t.food.calories*t.portion)),r.a.createElement("td",null,Math.round(t.food.protein*t.portion)),r.a.createElement("td",null,Math.round(t.food.carbs*t.portion)),r.a.createElement("td",null,Math.round(t.food.fiber*t.portion)),r.a.createElement("td",null,Math.round(t.food.fat*t.portion)),r.a.createElement("td",null,Math.round(t.food.sat_fat*t.portion)))})))))))}}]),t}(n.Component),V=Object(o.g)(R),G=a(29),J=a(86),K=function(e){var t=e.helperData,a=e.formData;return r.a.createElement("div",null,r.a.createElement("div",{className:"helper-container"},r.a.createElement("small",{className:"help helper-data"},"".concat(a.portion," ").concat(J("portion",a.portion))),r.a.createElement("small",{className:"help helper-data"},"".concat(Number(t.measure)*a.portion," ").concat(J(t.unit,Number(t.measure)*a.portion))),r.a.createElement("small",{className:"help helper-data"},"".concat(Number(t.grams)*a.portion," grams"))),r.a.createElement("div",{className:"helper-container"},r.a.createElement("small",{className:"help helper-data"},"".concat(Number(t.calories)*a.portion," calories")),r.a.createElement("small",{className:"help helper-data"},"".concat(Number(t.protein)*a.portion,"g protein")),r.a.createElement("small",{className:"help helper-data"},"".concat(Number(t.carbs)*a.portion,"g carbs"))),r.a.createElement("div",{className:"helper-container"},r.a.createElement("small",{className:"help helper-data"},"".concat(Number(t.fiber)*a.portion,"g fiber")),r.a.createElement("small",{className:"help helper-data"},"".concat(Number(t.fat)*a.portion,"g fat")),r.a.createElement("small",{className:"help helper-data"},"".concat(Number(t.sat_fat)*a.portion,"g sat. fat"))))},X=a(28),$=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={formData:{food:null,portion:1,date:X(new Date).format("YYYY-MM-DD")},foodOption:[],foodData:null,helperData:null,errors:{}},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value,l=Object(y.a)({},a.state.formData,Object(N.a)({},n,Number(r)));a.setState({formData:l})},a.handleDate=function(e){var t=e.target,n=t.name,r=t.value,l=Object(y.a)({},a.state.formData,Object(N.a)({},n,r));a.setState({formData:l})},a.handleSubmit=function(){var e=Object(g.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,O.a.post("/api/logs/",a.state.formData,{headers:{Authorization:"Bearer ".concat(S.getToken("token"))}});case 4:i.notify.show("Log entry created","success",2e3),a.props.history.push("/myaccount"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),a.setState(Object(y.a)({},a.state,{errors:e.t0.response.data}));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),a.handleMultiChange=function(e){var t=e?e.value:null,n=Object(y.a)({},a.state.formData,{food:t});a.setState({formData:n},(function(){a.dataHelper()}))},a.dataHelper=function(){if(!a.state.formData.food)return a.setState({helperData:null});var e=a.state.foodData.find((function(e){return e.id===a.state.formData.food}));a.setState({helperData:e})},a.handlePortion=function(e){var t=e.target.getAttribute("name");if("increase"===t){var n=Object(y.a)({},a.state.formData,{portion:a.state.formData.portion+1});a.setState({formData:n})}else if("decrease"===t){if(1===a.state.formData.portion)return;var r=Object(y.a)({},a.state.formData,{portion:a.state.formData.portion-1});a.setState({formData:r})}},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(g.a)(v.a.mark((function e(){var t,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.get("/api/foods/");case 3:t=e.sent,a=[],t.data.map((function(e){var t={};t.value=e.id,t.label=e.name,a.push(t)})),this.setState({foodOption:a,foodData:t.data}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.helperData,n=e.formData;return r.a.createElement("section",{className:"section"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"column is-centered"},r.a.createElement("div",{className:"column is-mobile is-centered"},r.a.createElement("figure",{className:"column is-mobile"},r.a.createElement("img",{className:"column is-mobile is-4 has-image-centered is-64x64",src:a(43)}))),r.a.createElement("div",{className:"column is-mobile is-centered"},r.a.createElement("form",{onSubmit:this.handleSubmit,className:"column is-mobile is-centered"},r.a.createElement("h2",{className:"title has-text-centered"},"New Log Entry"),r.a.createElement("hr",null),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label has-text-centered"},"Food"),r.a.createElement("div",{className:"control"},r.a.createElement(G.a,{onChange:this.handleMultiChange,options:this.state.foodOption,isClearable:!0})),this.state.errors.food&&r.a.createElement("small",{className:"help is-danger"},this.state.errors.food[0].replace("null","empty"))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label has-text-centered"},"Portion"),r.a.createElement("div",{className:"control"},r.a.createElement("div",{className:"flex-container"},r.a.createElement("div",{name:"decrease",className:"button",onClick:this.handlePortion},"-"),r.a.createElement("input",{className:"input",type:"number",min:1,name:"portion",value:this.state.formData.portion,onChange:this.handleChange}),r.a.createElement("div",{className:"button",name:"increase",onClick:this.handlePortion},"+"))),this.state.helperData&&r.a.createElement(K,{helperData:t,formData:n})),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label has-text-centered"},"Date"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"date",name:"date",value:this.state.formData.date,onChange:this.handleDate})),this.state.errors.date&&r.a.createElement("small",{className:"help is-danger"},this.state.errors.date[0])),r.a.createElement("div",{className:"field"},r.a.createElement("button",{type:"submit",className:"button is-fullwidth is-primary"},"Add Entry")))))))}}]),t}(r.a.Component),Q=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={navbarOpen:!1},a.toggleNavbar=function(){a.setState({navbarOpen:!a.state.navbarOpen})},a.handleLogout=function(){i.notify.show("Come back soon!","success",3e3),S.logout(),a.props.history.push("/")},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.state.navbarOpen;return r.a.createElement("nav",{className:"navbar"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"navbar-brand"},S.isAuthenticated()&&r.a.createElement(c.b,{className:"navbar-item",to:"/myaccount"},"Home"),!S.isAuthenticated()&&r.a.createElement(c.b,{className:"navbar-item",to:"/"},"Home"),r.a.createElement("p",{className:"navbar-burger ".concat(e?"is-active":""),onClick:this.toggleNavbar},r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null))),r.a.createElement("div",{className:"navbar-menu ".concat(e?"is-active":""),onClick:this.toggleNavbar},r.a.createElement("div",{className:"navbar-end"},S.isAuthenticated()&&r.a.createElement(c.b,{className:"navbar-item",to:"/logs/new"},"New Log Entry"),!S.isAuthenticated()&&r.a.createElement(c.b,{className:"navbar-item",to:"/register"},"Register"),!S.isAuthenticated()&&r.a.createElement(c.b,{className:"navbar-item",to:"/login"},"Login"),S.isAuthenticated()&&r.a.createElement(c.b,{className:"navbar-item",to:"/myaccount"},"My Account"),S.isAuthenticated()&&r.a.createElement(c.b,{className:"navbar-item",to:"/loghistory"},"Log History"),S.isAuthenticated()&&r.a.createElement("a",{onClick:this.handleLogout,className:"navbar-item"},"Logout")))))}}]),t}(r.a.Component),Z=Object(o.g)(Q),ee=a(12),te=function(e){var t=e.component,a=Object(ee.a)(e,["component"]);return S.isAuthenticated()?r.a.createElement(o.b,Object.assign({},a,{component:t})):(S.logout(),r.a.createElement(o.a,{to:"/login"}))},ae=function(){return r.a.createElement("section",{className:"hero is-fullheight-with-navbar is-danger"},r.a.createElement("div",{className:"hero-body"},r.a.createElement("div",{className:"container"},r.a.createElement("p",{className:"title is-1 has-text-centered"},"Something went wrong. Please try again!"))))},ne=a(28),re=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={formData:{food:null,portion:1,date:ne(new Date).format("YYYY-MM-DD")},foodOption:[],foodData:null,helperData:null},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value,l=Object(y.a)({},a.state.formData,Object(N.a)({},n,Number(r)));a.setState({formData:l})},a.handleDate=function(e){var t=e.target,n=t.name,r=t.value,l=Object(y.a)({},a.state.formData,Object(N.a)({},n,r));a.setState({formData:l})},a.handleSubmit=function(){var e=Object(g.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=a.props.match.params.id,e.prev=2,e.next=5,O.a.put("/api/logs/".concat(n,"/"),a.state.formData,{headers:{Authorization:"Bearer ".concat(S.getToken("token"))}});case 5:i.notify.show("Log entry updated","success",2e3),a.props.history.push("/loghistory"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),a.setState(Object(y.a)({},a.state,{errors:e.t0.response.data}));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),a.handleMultiChange=function(e){var t=e?e.value:null,n=Object(y.a)({},a.state.formData,{food:t});a.setState({formData:n},(function(){a.dataHelper()}))},a.dataHelper=function(){if(!a.state.formData.food)return a.setState({helperData:null});var e=a.state.foodData.find((function(e){return e.id===a.state.formData.food}));a.setState({helperData:e})},a.handlePortion=function(e){var t=e.target.getAttribute("name");if("increase"===t){var n=Object(y.a)({},a.state.formData,{portion:a.state.formData.portion+1});a.setState({formData:n})}else if("decrease"===t){if(1===a.state.formData.portion)return;var r=Object(y.a)({},a.state.formData,{portion:a.state.formData.portion-1});a.setState({formData:r})}},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(g.a)(v.a.mark((function e(){var t,a,n,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.id,e.prev=1,e.next=4,Promise.all([O.a.get("/api/foods/"),O.a.get("/api/logs/".concat(t))]);case 4:a=e.sent,n=[],a[0].data.map((function(e){var t={};t.value=e.id,t.label=e.name,n.push(t)})),r=a[1].data,this.setState({foodOption:n,foodData:a[0].data,formData:r}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,this,[[1,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.helperData,a=e.formData;return r.a.createElement("section",{className:"section"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"columns"},r.a.createElement("form",{onSubmit:this.handleSubmit,className:"column is-half is-offset-one-quarter"},r.a.createElement("h2",{className:"title"},"Update Log Entry"),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label has-text-centered"},"Food"),r.a.createElement("div",{className:"control"},r.a.createElement(G.a,{onChange:this.handleMultiChange,options:this.state.foodOption,isClearable:!0}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label has-text-centered"},"Portion"),r.a.createElement("div",{className:"control"},r.a.createElement("div",{className:"flex-container"},r.a.createElement("div",{name:"decrease",className:"button",onClick:this.handlePortion},"-"),r.a.createElement("input",{className:"input",type:"number",min:1,name:"portion",value:this.state.formData.portion,onChange:this.handleChange}),r.a.createElement("div",{className:"button",name:"increase",onClick:this.handlePortion},"+"))),this.state.helperData&&r.a.createElement(K,{helperData:t,formData:a})),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label has-text-centered"},"Date"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"date",name:"date",value:this.state.formData.date,onChange:this.handleDate}))),r.a.createElement("div",{className:"field"},r.a.createElement("button",{type:"submit",className:"button is-fullwidth is-primary"},"Add Entry"))))))}}]),t}(r.a.Component),le=function(e){var t=e.component,a=Object(ee.a)(e,["component"]);return S.isAuthenticated()?r.a.createElement(o.a,{to:"/myaccount"}):r.a.createElement(o.b,Object.assign({},a,{component:t}))},se=function(){return r.a.createElement(c.a,null,r.a.createElement(m.a,null),r.a.createElement("main",null,r.a.createElement(Z,null),r.a.createElement(o.d,null,r.a.createElement(o.b,{exact:!0,path:"/",component:E}),r.a.createElement(le,{path:"/register",component:C}),r.a.createElement(le,{path:"/login",component:x}),r.a.createElement(te,{path:"/myaccount",component:U}),r.a.createElement(te,{path:"/loghistory",component:V}),r.a.createElement(te,{path:"/logs/:id/edit",component:re}),r.a.createElement(te,{path:"/logs/new",component:$}),r.a.createElement(o.b,{path:"/*",component:ae}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(se,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[48,1,2]]]);
//# sourceMappingURL=main.34f25442.chunk.js.map